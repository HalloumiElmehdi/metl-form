<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>METL</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <style>
      label {
        font-weight: bold;
      }

      form {
        border: 1px solid gray;
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-light bg-light">
      <div class="container">
        <a class="navbar-brand" href="#">
          <img src="logo.png" alt="" width="100" height="auto" />
        </a>
      </div>
    </nav>
    <br /><br /><br />
    <div class="container">
      <div class="row">
        <div class="form-group col-md-4">
          <label for="budget">Type de budget</label>
          <select
            class="form-select"
            id="budget"
            aria-label="Selectionner un type de budget"
          >
            <option selected>Selectionner un type de budget</option>
            <option value="bg">BG</option>
            <option value="fsr">FSR</option>
          </select>
        </div>
        <div class="form-group col-md-4" id="fsrTypesDiv">
          <label for="fsrTypes">Type de FSR</label>
          <select
            class="form-select"
            id="fsrTypes"
            aria-label="Selectionner un type de budget"
          >
            <option selected>Selectionner un type de budget</option>
            <option value="1">fond special routier</option>
            <option value="2">fond de dev de domaine maritime</option>
          </select>
        </div>
        <div class="form-group col-md-4">
          <label for="programme">Programmes</label>
          <select
            class="form-select"
            id="programme"
            aria-label="Selectionner un programme"
            disabled
          >
            <option selected>Selectionner un programme</option>
            <option value="1">Routes</option>
            <option value="2">Les ports et domaine public maritime</option>
            <option value="3">Eaux</option>
            <option value="4">Conduite et Pilotage</option>
            <option value="5">Expropriation</option>
            <option value="6">Jugements</option>
          </select>
        </div>
      </div>
      <hr />
      <div class="row">
        <div class="form-group col-md-4">
          <label for="reportedCredit">Crédit reporté (KDH)</label>
          <input
            type="number"
            class="form-control"
            id="reportedCredit"
            placeholder="..."
          />
        </div>
        <div class="form-group col-md-4">
          <label for="newCredit">Crédit neuf (KDH)</label>
          <input
            type="number"
            class="form-control"
            id="newCredit"
            placeholder="..."
          />
        </div>
        <div class="form-group col-md-4">
          <label for="totalCredit">Total des crédits (KDH)</label>
          <input
            type="number"
            class="form-control"
            id="totalCredit"
            placeholder="..."
            disabled
          />
        </div>
      </div>
      <hr />
      <div class="row">
        <div class="form-group col-md-3">
          <label for="totalEngaged">Total Engagé</label>
          <input
            type="number"
            class="form-control"
            id="totalEngaged"
            placeholder="..."
          />
        </div>
        <div class="form-group col-md-3">
          <label for="engagedRate">Taux Engagement</label>
          <input
            type="number"
            class="form-control"
            id="engagedRate"
            placeholder="..."
          />
        </div>
        <div class="form-group col-md-3">
          <label for="totalIssued">Total émis (KDH)</label>
          <input
            type="number"
            class="form-control"
            id="totalIssued"
            placeholder="..."
          />
        </div>
        <div class="form-group col-md-3">
          <label for="issuedRate">Taux émission en %</label>
          <input
            type="number"
            class="form-control"
            id="issuedRate"
            placeholder="..."
          />
        </div>
      </div>
      <hr />
      <div class="row">
        <div class="form-group col-md-3">
          <label for="previsonOne">Prevision</label>
          <input
            type="month"
            class="form-control"
            id="previsonOne"
            placeholder="..."
          />
          <input type="number" class="form-control mt-2" placeholder="%" />
        </div>
        <div class="form-group col-md-3">
          <label for="previsionTwo">Prevision</label>
          <input
            type="month"
            class="form-control"
            id="previsionTwo"
            placeholder="..."
          />
          <input type="number" class="form-control mt-2" placeholder="%" />
        </div>
      </div>
      <hr />
      <div class="row">
        <div class="col">
          <button type="submit" class="btn btn-primary" id="submit">
            Soumettre
          </button>
        </div>
      </div>
    </div>

    <script>
      $("#budget").change(function () {
        const select = $("#budget").find(":selected").val();
        $("#programme").prop("disabled", false);
        if (select === "fsr") {
          $("#fsrTypesDiv").show();
        } else {
          $("#fsrTypesDiv").hide();
        }
      });

      $("#newCredit").on("input", function () {
        let newCredit = parseInt($("#newCredit").val());
        let reportedCredit = parseInt($("#reportedCredit").val());
        if (isNaN(newCredit)) newCredit = 0;
        if (isNaN(reportedCredit)) reportedCredit = 0;

        $("#totalCredit").val(newCredit + reportedCredit);
      });

      $("#reportedCredit").on("input", function () {
        let newCredit = parseInt($("#newCredit").val());
        let reportedCredit = parseInt($("#reportedCredit").val());
        if (isNaN(newCredit)) newCredit = 0;
        if (isNaN(reportedCredit)) reportedCredit = 0;

        $("#totalCredit").val(newCredit + reportedCredit);
      });
    </script>
  </body>
</html>
